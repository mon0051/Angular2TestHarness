swagger: "2.0"
info:
  version: "0.1.3"
  title: LWB CIRTS API
basePath:  /Lwb.Cirts.WebService/api
paths:
  /ping:
    get:
      description: |
        An endpoint used to confirm connectivity and authentication
      responses:
        200:
          description: 'Successful response'
          schema:
            type: object
            properties:
              responseText:
                type: string
              responseTime:
                type: string
                description: |
                  Time it takes the server to respond _after_ you have been authenticated.
  /clients:
    get:
      description: |
        Will take a number of parameters, search the CIRTS database, and
        return a list of clients that match the given parameters.

        **Important!**

        A query must have at least one of the following parameters provided to be a valid query.
        1. GivenNames (At least 3 characters, will match on partial) _This will also search aliases_
        2. FamilyName (At least 3 characters, will match on partial)
        3. CirtsId (Will match exact only, so provide full id if using)

        Only one LWBLocation can be searched at once (per query), defaulting to Australia. **If you do not provide an LwbLocation only results from Australia will be returned.**

        # Example Data #

        Given that the database contains the following **client** data.

        **Note.** _This does not represent actual database structure, it represents
        what an appropriate database query would return if looking for this information._

        | cirtsID | firstName | familyName | dateOfBirth | lwbRegion        | gender | lwbLocation |state|sector               |active|
        |:-------:|:---------:|:----------:|:-----------:|:----------------:|:------:|:-----------:|:---:|:-------------------:|:----:|
        | 00001   | Jane      | Doe        | 19800101    | Parramatta       |Female  | Australia   |VIC  |Disability           |true  |
        | 00002   | John      | Doe        | 19820202    | Bankstown        |Male    | Australia   |NSW  |Youth Justice        |true  |
        | 00003   | Joe       | Bloggs     | 19991231    | Auckland         |Unknown | New Zealand |QLD  |Homelessness         |false |
        | 00004   | Leroy     | Jenkins    | 19500101    | Lordaron         |Male    | Australia   |VIC  |Mental Health        |true  |
        | 00005   | Jenny     | Gergich    | 19800101    | Darblock         |Female  | Australia   |QLD  |Home & Community Care|true  |
        | 00006   | Sam       | Johns      | 19770101    | Hunter Disability|Unknown | New Zealand |WA   |Disability           |true  |
        | 00007   | Opla      |            | 19200101    | Katherine        |None    | Australia   |VIC  |Homelessness         |true  |

        The following example behaviour is expected . . .

        ## Basic Parameter Examples ##

        ##### A search for a given cirtsId will return only the client with matching cirtsId #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?cirtsId=CL00001|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" }]
        }
        ```
        ##### A search for a given familyName will return clients iff they have a matching familyName #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?familyName=Jenkins|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00004", "firstName": "Leroy", "familyName": "Jenkins",  "dateOfBirth": "1950-01-01T00:00:00.000Z", "lwbRegion": "Lordaron" }]
        }
        ```

        ##### A search for givenNames will return clients iff they have matching givenNames #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?givenNames=Sam|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00006", "firstName": "Sam", "familyName": "Johns",  "dateOfBirth": "1977-01-01T00:00:00.000Z", "lwbRegion": "Hunter Disability" }]
        }
        ```

        ##### A search for a given lwbLocation will return clients iff they have a matching lwbLocation #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?lwbLocation=Australia|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" },
            { "cirtsID": "00002", "firstName": "John", "familyName": "Doe",  "dateOfBirth": "1982-02-02T00:00:00.000Z", "lwbRegion": "Bankstown" },
            { "cirtsID": "00004", "firstName": "Leroy", "familyName": "Jenkins",  "dateOfBirth": "1950-01-01T00:00:00.000Z", "lwbRegion": "Lordaron" },
            { "cirtsID": "00005", "firstName": "Jenny", "familyName": "Gergich",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Darblock" },
            { "cirtsID": "00007", "firstName": "Opla", "familyName": " ",  "dateOfBirth": "1920-01-01T00:00:00.000Z", "lwbRegion": "Katherine" }]
        }
        ```

        ##### A search for a given lwbRegion will return clients iff they have a matching lwbRegion #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?lwbRegion=bankstown|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00002", "firstName": "John", "familyName": "Doe",  "dateOfBirth": "1982-02-02T00:00:00.000Z", "lwbRegion": "Bankstown" }]
        }
        ```

        ##### A search for a given state will return clients iff they have a matching state #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?state=VIC|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" },
            { "cirtsID": "00004", "firstName": "Leroy", "familyName": "Jenkins",  "dateOfBirth": "1950-01-01T00:00:00.000Z", "lwbRegion": "Lordaron" },
            { "cirtsID": "00007", "firstName": "Opla", "familyName": " ",  "dateOfBirth": "1920-01-01T00:00:00.000Z", "lwbRegion": "Katherine" }]
        }
        ```

        ##### A search for a given sector will return clients iff they have a matching sector #####

        **Note** _Some characters mean special things in Urls, so they must be replaced with codes instead.
        Here '&' must be replaced with %26 and ' '(A space) must be replaced with '+'.

        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?sector=Home+%26+Community+Care|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00005", "firstName": "Jenny", "familyName": "Gergich",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Home & Community Care" }]
        }
        ```

        ##### A search for a given active will return clients iff they have a matching active #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?active=true|200 OK|
        **Note** _Even though Sam Johns is active, they are not in the default LwbLocation(Australia) and their LwbLocation (New Zealand)
        was not specified. (See dateOfBirthLow example for an example)_


        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" },
            { "cirtsID": "00002", "firstName": "John", "familyName": "Doe",  "dateOfBirth": "1982-02-02T00:00:00.000Z", "lwbRegion": "Bankstown" },
            { "cirtsID": "00004", "firstName": "Leroy", "familyName": "Jenkins",  "dateOfBirth": "1950-01-01T00:00:00.000Z", "lwbRegion": "Lordaron" },
            { "cirtsID": "00005", "firstName": "Jenny", "familyName": "Gergich",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Darblock" },
            { "cirtsID": "00007", "firstName": "Opla", "familyName": " ",  "dateOfBirth": "1920-01-01T00:00:00.000Z", "lwbRegion": "Katherine" }
            ]
        }
        ```

        ##### A search for a given dateOfBirthLow will return clients iff they were born on or after dateOfBirthLow #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?dateOfBirthLow=19800101|200 OK|
        **Note** _Even though Joe Bloggs meets the date criteria, he is not in the default LwbLocation (Australia) and his LwbLocation(New Zealand)
        was not specified._
        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" },
            { "cirtsID": "00002", "firstName": "John", "familyName": "Doe",  "dateOfBirth": "1982-02-02T00:00:00.000Z", "lwbRegion": "Bankstown" },
            { "cirtsID": "00005", "firstName": "Jenny", "familyName": "Gergich",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Darblock" }]
        }
        ```
        **Note** _This query will return with Joe Bloggs, but not the others because they are in lwbLocation Australia._

        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?dateOfBirthLow=19800101&lwbLocation=new+zealand|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00003", "firstName": "Joe", "familyName": "Bloggs",  "dateOfBirth": "1999-12-31T00:00:00.000Z", "lwbRegion": "Auckland" }]
        }
        ```

        ##### A search for a given dateOfBirthHigh will return clients iff they were born before or on dateOfBirthHigh #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?dateOfBirthHigh=19300101|200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00007", "firstName": "Opla", "familyName": " ",  "dateOfBirth": "1920-01-01T00:00:00.000Z", "lwbRegion": "Katherine" }]
        }
        ```

        ##### A search for a given gender will return clients iff they have a matching gender #####
        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?gender=male| 200 OK|
        ```json
        {
          "clients": [
            { "cirtsID": "00002", "firstName": "John", "familyName": "Doe",  "dateOfBirth": "1982-02-02T00:00:00.000Z", "lwbRegion": "Bankstown" },
            { "cirtsID": "00004", "firstName": "Leroy", "familyName": "Jenkins",  "dateOfBirth": "1950-01-01T00:00:00.000Z", "lwbRegion": "Lordaron" }]
        }
        ```

        ## Multiple Parameter Examples ##

        When multiple parameters are provided, only clients that match all the parameters will be returned

        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?dateOfBirthLow=19800101&dateOfBirthHigh=19810101|200 OK|
        **Note** _Even though Joe Bloggs meets the date criteria, he is not in the default LwbLocation (Australia) and his LwbLocation(New Zealand)
        was not specified._
        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" },
            { "cirtsID": "00005", "firstName": "Jenny", "familyName": "Gergich",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Darblock" }]
        }
        ```

        | Request URL | Expected Response Code |
        |:-----------:|:----------------------:|
        |/clients?dateOfBirthLow=19800101&dateOfBirthHigh=19810101&firstName=jane|200 OK|
        **Note** _Even though Joe Bloggs meets the date criteria, he is not in the default LwbLocation (Australia) and his LwbLocation(New Zealand)
        was not specified._
        ```json
        {
          "clients": [
            { "cirtsID": "00001", "firstName": "Jane", "familyName": "Doe",  "dateOfBirth": "1980-01-01T00:00:00.000Z", "lwbRegion": "Parramatta" }]
        }
        ```
      parameters:
        -
          $ref: '#/parameters/cirtsIdParam'
        -
          $ref: '#/parameters/givenNamesParam'
        -
          $ref: '#/parameters/familyNameParam'
        -
          $ref: '#/parameters/lwbLocationParam'
        -
          $ref: '#/parameters/lwbRegionParam'
        -
          $ref: '#/parameters/stateParam'
        -
          $ref: '#/parameters/sectorParam'
        -
          $ref: '#/parameters/activeParam'
        -
          $ref: '#/parameters/dateOfBirthLowParam'
        -
          $ref: '#/parameters/dateOfBirthHighParam'
        -
          $ref: "#/parameters/genderParam"
        -
          $ref: '#/parameters/pageParam'
        -
          $ref: '#/parameters/pageSizeParam'
      responses:
        200:
          description: 'Successful response'
          schema:
            title: clients
            type: array
            items:
              title: Client
              type: object
              properties:
                cirtsId:
                  $ref: '#/definitions/cirtsId'
                names:
                  $ref: '#/definitions/names'
                dateOfBirth:
                  $ref: '#/definitions/dateOfBirth'
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
        400:
          $ref: '#/responses/badRequest'
        403:
          $ref: '#/responses/forbiddenError'
        404:
          $ref: '#/responses/notFoundError'
        500:
          $ref: '#/responses/serverError'
  /clients/{cirtsId}:
    get:
      description: |
        ## Example Data ##
        Given the following data is in the database

        **Note.** _This does not represent the database structure. This is not the same as client search sample data. For readability this has been split into two tables._

        ### Client Data Part 1 ###

        |CirtsId|FirstName|LastName  |Alias |LwbStatus|Medicare    |PrimaryServiceType|
        |:-----:|:-------:|:--------:|:----:|:-------:|:----------:|:----------------:|
        |CL0001 |Jane     |Doe       |Dagger|TRUE	  |0000-00001-1|Disability        |
        |CL0002 |John     |Doe       |	    |TRUE	  |0000-00002-1|Youth Justice     |
        |CL0003 |Joe      |Bloggs    |	    |FALSE	  |0000-00001-2|Homelessness      |
        |CL0004 |Leroy    |Jenkins   |Smitty|TRUE	  |0000-00002-2|Mental Health     |
        |CL0005 |Sara     |Gergich   |		|TRUE     |0000-00001-3|Disability        |
        |CL0006 |Sam      |Johns     |		|TRUE     |0000-00002-3|Disability        |
        |CL0007 |Opla     |          |Aaron |TRUE     |0000-00001-4|Homelessness      |

        ### Client Data Part 2 ###

        |CirtsId|PhoneNumber   |LwbRegion    |IndigenousStatus         |Gender      |PrimaryLanguage     |DateOfBirth    |DobEstimated  |
        |:-----:|:------------:|:-----------:|:-----------------------:|:----------:|:------------------:|:-------------:|:------------:|
        |CL0001 |(03) 5555 5555|Parramatta	 |Not disclosed            |Female      |English             |19800101       |FALSE         |
        |CL0002 |(02) 6666 5555|Bankstown	 |Not disclosed	           |Male        |English	         |19820202       |FALSE         |
        |CL0003 |+64 5656 9898 |Auckland     |None                     |Unknown     |Haka                |19991231       |FALSE         |
        |CL0004 |(03) 6565 9898|Lordaron	 |Torres Strait Islander   |Male        |Romanian            |19500101       |TRUE          |
        |CL0005 |(07) 5454 9898|Darblock	 |Aboriginal	           |Female      |English	         |19800101	     |FALSE         |
        |CL0006 |              |Auckland     |Not Disclosed	           |Unknown     |Sign Language       |19770101       |TRUE          |
        |CL0007 |	           |Katherine	 |Torres Strait Islander   |None        |Invented Languages  |19200101       |TRUE          |

        ## Example Queries ##

        #### Valid client example ####

        **Query** clients\CL0001

        **Expected Response**
        Status: 200 OK

        ```json
        {
            "client":{
              "cirtsId":"CL0001",
              "clientName":"Jane Doe (Dagger)",
              "lwbStatus":"true",
              "medicare":"0000-00001-1",
              "primaryServiceType":"Disability",
              "phoneNumber":"(03) 5555 5555",
              "lwbRegion":"Parramatta",
              "indigenousStatus":"Not disclosed ",
              "gender":"Female",
              "primaryLanguage":"English",
              "dateOfBirth":"19800101",
              "dobEstimated":"false"
            }
        }
        ```

        _Notice that although firstName, familyName, and alias are seperate in the database, they will be returned as a single "clientName" value.
        This reflects the behaviour of the desktop client._

        #### Valid client example, missing data ####

        **Query** clients\CL0007

        **Expected Response**
        Status: 200 OK

        ```json
        {
            "client":{
              "cirtsId":"CL0007",
              "clientName":"Opla (Aaron)",
              "lwbStatus":"true",
              "medicare":"0000-00001-4",
              "primaryServiceType":"Homelessness",
              "lwbRegion":"Katherine",
              "indigenousStatus":"Torres Strait Islander",
              "primaryLanguage":"Invented Languages",
              "dateOfBirth":"19200101",
              "dobEstimated":"true"
            }
        }
        ```

        _Notice that no phone number or gender parameter is returned. This means that no information exists about these values in the database_

        #### Client doesn't exist example ####

        **Query** clients\CL0009

        **Expected Response**
        Status: 404 NOT FOUND

        ```json
        {
            "readyState": 4,
            "responseJSON": {
                "error": "Client with CirtsId CL0009 was not found"
            },
            "status": 404,
            "statusText": "Not Found"
        }
        ```

        #### Missing cirtsId prefix example ####

        **Query** clients\0001

        **Expected Response**
        Status: 400 BAD REQUEST

        ```json
        {
            "readyState": 4,
            "responseJSON": {
                "message": "Given CirtsId does not have a CL prefix (For Client).Please ensure you are using the correct CirtsId and the correct URL."
            },
            "status": 400,
            "statusText": "Bad Request"
        }
        ```
      parameters:
      -
        name: cirtsId
        in: path
        description: |
          Client CirtsId. Must be provided with alphabetic prefix. eg. CL1000 is valid 1000 is not valid.
        type: string
        required: true
        format: CLXXXXX
      responses:
        200:
          description: |
            Successful response. Will contain detail on one client.
          schema:
            title: client
            type: object
            properties:
              cirtsId:
                type: string
                format: CLXXXXXX,
                description: |
                  The CirtsId of the client in question. Will be in the format CLXXXX
              clientName:
                type: string
                format: GivenNames FamilyName (Alias)
                description: |
                  The full name of the client, specified as GivenNames FamilyName (Alias)
              dateOfBirth:
                type: string
                format: YYYYMMDD
                description: |
                  Age can be calculated using this value. May be an estimate.
              dobEstimated:
                type: boolean
                description: |
                  True if the date of birth was estimated rather than taken from records
              primaryLanguage:
                type: string
                description: |
                  The primary language spoken by the client
              gender:
                type: string
                description: |
                  The gender of the client. Valid values are Male, Female, Unknown, None and Other. A value of None
                  means that a gender was never entered into the system, or the information on the clients gender
                  could not be found. A value of Unknown means a value was entered into the system, but was specified
                  as Unknown (Possibly automatically). A value of Other means the gender was specified, but was not
                  fit either Male or Female.
              indigenousStatus:
                type: string
                description: |
                  Will specify what kind of indigenous status client has, or none.
              phoneNumber:
                type: string
                description: |
                  As phone numbers are often given with brackets and non-numerical prefixes, this is a string
                  and not a number as might be expected.
              primaryServiceType:
                type: string
                description: |
                  The Primary service that is provided by LWB to the client
              medicare:
                type: string
                description: |
                  The Medicare status of the client. Can be a number of predefined values.
              lwbStatus:
                type: boolean
                description: |
                  True is client is currently active
              lwbRegion:
                type: string
                description: |
                  Associated LWB region of client. Regions are contained in States.
        400:
          $ref: '#/responses/badRequest'
        403:
          $ref: '#/responses/forbiddenError'
        404:
          $ref: '#/responses/notFoundError'
        500:
          $ref: '#/responses/serverError'
  /clients/{cirtsId}/sectors:
    get:
      description: |
          Takes a CirtsId and provides a list of sectors related to the client
      parameters:
      -
        name: cirtsId
        in: path
        description: |
          Client CirtsId. Must be provided with alphabetic prefix. eg. CL1000 is valid 1000 is not valid.
        type: string
        required: true
        format: CLXXXX
      -
        $ref: '#/parameters/pageParam'
      -
        $ref: '#/parameters/pageSizeParam'
      responses:
        200:
          description: |
            List of sectors client is associated with
          schema:
            title: clientSectors
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                  description: |
                    Name of client sector
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
        400:
          $ref: '#/responses/badRequest'
        403:
          $ref: '#/responses/forbiddenError'
        404:
          $ref: '#/responses/notFoundError'
        500:
          $ref: '#/responses/serverError'
  /clients/{cirtsId}/workers:
    get:
      parameters:
      -
        name: cirtsId
        in: path
        description: |
          Client CirtsId. Must be provided with alphabetic prefix. eg. CL1000 is valid 1000 is not valid.
        type: string
        required: true
        format: CLXXXX
      -
        $ref: '#/parameters/pageParam'
      -
        $ref: '#/parameters/pageSizeParam'
      responses:
        200:
          description: |
            Workers associated with given client
          schema:
            title: KeyWorker
            type: object
            properties:
              givenNames:
                type: string
                description: |
                  Given Names of the worker
              familyName:
                type: string
                description: |
                  Family name of the Worker
              workerId:
                type: string
                format: WXXXXX
              page:
                $ref: '#/definitions/page'
              pageSize:
                $ref: '#/definitions/pageSize'
              totalResults:
                $ref: '#/definitions/totalResults'
        400:
          $ref: '#/responses/badRequest'
        403:
          $ref: '#/responses/forbiddenError'
        404:
          $ref: '#/responses/notFoundError'
        500:
          $ref: '#/responses/serverError'
  /clients/{cirtsId}/network:
      get:
        description: |
          Not finished, will currently return all client network connections, in future will allow querying to narrow results
        parameters:
        -
          name: cirtsId
          in: path
          description: |
            Client CirtsId. Must be provided with alphabetic prefix. eg. CL1000 is valid 1000 is not valid.
          type: string
          required: true
          format: CLXXXX
        -
          $ref: '#/parameters/pageParam'
        -
          $ref: '#/parameters/pageSizeParam'
        responses:
          200:
            description: |
              The clients social/family network members
            schema:
              title: KeyWorker
              type: object
              properties:
                name:
                  type: string
                  description: |
                    Full name of the network connection (a network connection is a person associated with the client).
                category:
                  type: string
                  description: |
                    The type of connection. eg. Parent, sibling etc
                connection:
                  type: string
                  description: |
                    A finer grain version of category, this will be Father, Mother, Brother, Sister etc.
                status:
                  type: string
                  description: |
                    Active/Inactive flag.
                contactType:
                  type: string
                  description: |
                    How this contact is made with this network connection. eg Phone, email, face to face etc. Set to unrestricted by default.
                phoneNumber:
                  type: string
                  description: |
                    The phone number may have been entered in various formats, eg (00) 0000 0000, 0000000000, 000000000, +61000000000.
                    Will be returned as entered.
                keyConnectionInformation:
                  type: string
                  description: |
                    Important information about relation to client, eg Primary Care Giver, Emergency Contact
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
          400:
            $ref: '#/responses/badRequest'
          403:
            $ref: '#/responses/forbiddenError'
          404:
            $ref: '#/responses/notFoundError'
          500:
            $ref: '#/responses/serverError'
  /clients/{cirtsId}/familyNetwork:
      get:
        parameters:
        -
          name: cirtsId
          in:
            path
          type:
            $ref: "#/parameters/cirtsIdParam/type"
          required: true
          description:
            $ref: "#/parameters/cirtsIdParam/description"
        -
          $ref: '#/parameters/pageParam'
        -
          $ref: '#/parameters/pageSizeParam'
        responses:
          200:
            description: |
              The clients social/family network members
            schema:
              title: KeyWorker
              type: object
              properties:
                name:
                  type: string
                  description: |
                    Full name of the network connection (a network connection is a person associated with the client).
                category:
                  type: string
                  description: |
                    The type of connection. eg. Parent, sibling etc
                connection:
                  type: string
                  description: |
                    A finer grain version of category, this will be Father, Mother, Brother, Sister etc.
                status:
                  type: string
                  description: |
                    Active/Inactive flag.
                contactType:
                  type: string
                  description: |
                    How this contact is made with this network connection. eg Phone, email, face to face etc. Set to unrestricted by default.
                phoneNumber:
                  type: string
                  description: |
                    The phone number may have been entered in various formats, eg (00) 0000 0000, 0000000000, 000000000, +61000000000. Will be returned as entered.
                keyConnectionInformation:
                  type: string
                  description: |
                    Important information about relation to client, eg Primary Care Giver, Emergency Contact
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
          400:
            $ref: '#/responses/badRequest'
          403:
            $ref: '#/responses/forbiddenError'
          404:
            $ref: '#/responses/notFoundError'
          500:
            $ref: '#/responses/serverError'
  /clients/{cirtsId}/dibpFamily:
      get:
        parameters:
        -
          name: cirtsId
          in: path
          description: |
            Client CirtsId. Must be provided with alphabetic prefix. eg. CL1000 is valid 1000 is not valid.
          type: string
          required: true
          format: CLXXXX
        -
          $ref: '#/parameters/pageParam'
        -
          $ref: '#/parameters/pageSizeParam'
        responses:
          200:
            description: |
              The clients social/family network members
            schema:
              title: KeyWorker
              type: object
              properties:
                name:
                  type: string
                  description: |
                    Full name of the network connection (a network connection is a person associated with the client).
                category:
                  type: string
                  description: |
                    The type of connection. eg. Parent, sibling etc
                connection:
                  type: string
                  description: |
                    A finer grain version of category, this will be Father, Mother, Brother, Sister etc.
                status:
                  type: string
                  description: |
                    Active/Inactive flag.
                contactType:
                  type: string
                  description: |
                    How this contact is made with this network connection. eg Phone, email, face to face etc. Set to unrestricted by default.
                phoneNumber:
                  type: string
                  description: |
                    The phone number may have been entered in various formats, eg (00) 0000 0000, 0000000000, 000000000, +61000000000.
                    Will be returned as entered.
                keyConnectionInformation:
                  type: string
                  description: |
                    Important information about relation to client, eg Primary Care Giver, Emergency Contact
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
          400:
            $ref: '#/responses/badRequest'
          403:
            $ref: '#/responses/forbiddenError'
          404:
            $ref: '#/responses/notFoundError'
          500:
            $ref: '#/responses/serverError'
  /caseload:
    get:
      description: |
        Returns the caseload for the current user (The user provided to log in)
      parameters:
        -
          $ref: '#/parameters/pageParam'
        -
          $ref: '#/parameters/pageSizeParam'
      responses:
        200:
          description: |
            Clients and Carers in the caseload of the given username
          schema:
            title: caseload
            type: array
            items:
              title: caseload
              type: object
              properties:
                cirtsId:
                  type: string
                  description: |
                    The cirts id of the client or carer in the caseload. The prefix will determine if this is a client or carer.
                givenNames:
                  type: string
                  description: |
                    The given names of the client or carer
                familyName:
                  type: string
                  description: |
                    The family name of the given client or carer
                dateOfBirth:
                  type: string
                  format: YYYYMMDD
                  description: |
                    Age can be calculated using this value. May be an estimate.
                gender:
                  type: string
                  description: |
                    The gender of the client. Valid values are Male, Female, Unknown, None and Other. A value of None
                    means that a gender was never entered into the system, or the information on the clients gender
                    could not be found. A value of Unknown means a value was entered into the system, but was specified
                    as Unknown (Possibly automatically). A value of Other means the gender was specified, but was not
                    fit either Male or Female.
                preferredPhoneNumber:
                  type: string
                  format: As stored in database
                  description: |
                    The prefered contact number of the client or carer. Can be stored in various formats
                    (eg (00) 0000 0000, 0000000000, +00000000000, 00 00000000), and will be returned as entered.
                suburb:
                  type: string
                  description: |
                    The suburb the client / carer is from. Will be returned as a simple text value.
                state:
                  type: string
                  description: |
                    The state the client/carer is from. Will be returned as a simple text value.
                status:
                  type: string
                  description: |
                    The status of client / carer. Valid values are active and inactive.
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
  /person:
    get:
      parameters:
      -
        $ref: '#/parameters/cirtsIdParam'
      -
        $ref: '#/parameters/givenNamesParam'
      -
        $ref: '#/parameters/familyNameParam'
      -
        $ref: '#/parameters/lwbLocationParam'
      -
        $ref: '#/parameters/lwbRegionParam'
      -
        $ref: '#/parameters/stateParam'
      -
        $ref: '#/parameters/sectorParam'
      -
        $ref: '#/parameters/activeParam'
      -
        $ref: '#/parameters/dateOfBirthLowParam'
      -
        $ref: '#/parameters/dateOfBirthHighParam'
      -
        $ref: "#/parameters/genderParam"
      -
        $ref: '#/parameters/pageParam'
      -
        $ref: '#/parameters/pageSizeParam'
      responses:
        200:
          description: |
            successful responses
          schema:
            title: people
            type: array
            items:
              title: People
              type: object
              properties:
                givenNames:
                  $ref: '#/definitions/givenNames'
                familyName:
                  $ref: '#/definitions/familyName'
                cirtsId:
                  $ref: '#/definitions/cirtsId'
                dateOfBirth:
                  $ref: '#/definitions/dateOfBirth'
                personType:
                  $ref: '#/definitions/personType'
                page:
                  $ref: '#/definitions/page'
                pageSize:
                  $ref: '#/definitions/pageSize'
                totalResults:
                  $ref: '#/definitions/totalResults'
        400:
          $ref: '#/responses/badRequest'
        403:
          $ref: '#/responses/forbiddenError'
        404:
          $ref: '#/responses/notFoundError'
        500:
          $ref: '#/responses/serverError'
responses:
  serverError:
    description: |
      Default Server Error Message, returned when it does not meet the requirements for other messages.
      Will probably contain an exception, and as such, should not be provided to unauthenticated users.
      The default message for an unauthenticated request is 404 Not Found ( Good Security Practice )
    schema:
      title: Internal Server Error
      type: object
      properties:
        message:
          type: string
          default: 'An unknown error has occured'
        code:
          type: integer
          default: 500
  notFoundError:
    description: |
      Returned when a resource was not found, or a request has no authentication.
      In the case of an actual resource not found, this will contain more specific information.
    schema:
      title: Not Found
      type: object
      properties:
        message:
          type: string
          default: |
            The resource you are looking for could not be found.
          description: |
            This will contain information specific
            to each api if the request is authenticated, otherwise just a generic message.
        code:
          type: integer
          default: 404
  forbiddenError:
    description: |
      A request has CIRTS permissions, but not the expected permissions for the given resource.
      This response is distinguised from the 404 Not Found in that can provide hints to a resolution.
    schema:
      title: Forbidden
      type: object
      properties:
        message:
          type: string
          default: |
            You do not have access to the resource you have requested. Ensure you are using the correct username
            and password, or contact the helpdesk if you believe you should have access to this resource.
        code:
          type: integer
          default: 403
  badRequest:
    description: |
      The request was not in the format expected. Either a required parameter was missing, an unexpected
      parameter was provided, of a paramter/s was not the correct value.
    schema:
      title: Bad Request
      type: object
      properties:
        message:
          type: string
          description: |
            Here details will be provided into which parameter/s was malformed. For example Expected parameter "cirtsId" was not provided
        code:
          type: integer
          default: 400
definitions:
  givenNames:
    type: string
    description: |
      The Clients given name
  familyName:
    type: string
    description: |
      Clients family name. Equivilent to surname, second name
  cirtsId:
    type: string
    format: CLXXXXX
    description: |
      The CirtsId of the client
  dateOfBirth:
    type: string
    format: YYYYMMDD
    description: |
      Will always be returned in this format. Manipulation client side is trivial to display in other formats.
  lwbRegion:
    type: string
    description: |
      The region from which LWB provides services to the client
  personType:
    type: string
  page:
    description: |
      Current Page. Use in conjuction with page size to page through results
    type: integer
  pageSize:
    description: |
      Number of results per page
    type: integer
  totalResults:
    description: |
      Total number of results found for query.
    type: integer
parameters:
  cirtsIdParam:
    name: cirtsId
    in: query
    description: |
      The CirtsId of the client you are searching for. You can expect to only get one result if this is
      specified correctly. Format is CLXXXXX
    required: false
    type: string
    format: CLXXXXX
  givenNamesParam:
    name: givenNames
    in: query
    description: |
      The given name/s of the client/s you are searching for. Seperate names by a space. If the client is only or primarily know by a nickname, they may have an alias saved in their personal details. This parameter will also return results where it matchs the clients alias.
    required: false
    type: string
    format: text
  familyNameParam:
    name: familyName
    in: query
    description: |
      The family name of the client. Not all clients have a provided family name, these records have a family name with an empty string or whitespace as value, which is not the same as a null value.
    required: false
    type: string
    format: text
  lwbLocationParam:
    name: lwbLocation
    in: query
    description: |
      The LWB location the client is associated with. This is normally a Country. Do not specify abbreviated names eg. USA as they are not stored in the database and will yeild no responses.
    required: false
    type: string
    format: text
  lwbRegionParam:
    name: lwbRegion
    in: query
    description: |
      Associated LWB Region that is associated with the client. Regions are (Usually) contained inside a State. Provide full name of region eg. "Far North Coast"
    required: false
    type: string
    format: text
  stateParam:
    name: state
    in: query
    description: |
      Associate State or Teritory associated with the client. Provide in abbreviated form eg. NSW, VIC etc. Full names of states are not saved in the databas and will not return results if used.
    required: false
    type: string
    format: text
  sectorParam:
    name: sector
    in: query
    description: |
      Sector of the LWB organisation Associated with this client. eg. "Mental Health", "Disability"
    required: false
    type: string
    format: text
  activeParam:
    name: active
    in: query
    description: |
      Flag that specifies if the client/s returned are in current caseload
    required: false
    type: boolean
  dateOfBirthLowParam:
    name: dateOfBirthLow
    in: query
    description: |
      Lowest dateOfBirth to be returned in search results.
    required: false
    type: string
    format: YYYYMMDD
  dateOfBirthHighParam:
    name: dateOfBirthHigh
    in: query
    description: |
      Maximum dateOfBirth to be returned in search results.
    required: false
    type: string
    format: YYYYMMDD
  genderParam:
    name: gender
    in: query
    description: |
      'Client gender. Valid inputs are Male, Female, Unknown, None, Other'. None is the default and will return results from any gender.
    required: false
    type: string
    format: text
  pageParam:
    name: page
    description: |
      The page you wish to view. Use in conjunction with page size to get a selection of results
    in: query
    required: false
    type: number
    format: integer
  pageSizeParam:
    name: pageSize
    description: number of results to return per page
    in: query
    required: false
    type: number
    format: integer
security:
  -
    apiKey: []
  -
    Authorization: []
  -
    timestamp: []
  -
    nonce: []
securityDefinitions:
  apiKey:
    type: apiKey
    name: X-Api-Key
    in: header
    description: |
      Must be supplied in the format

          apiId:encryptedApiKey
  timestamp:
    type: apiKey
    name: X-Timestamp
    in: header
  nonce:
    type: apiKey
    name: X-Nonce
    in: header
  Authorization:
    type: basic